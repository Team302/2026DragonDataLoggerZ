plugins {
    id "java"
    id "edu.wpi.first.GradleRIO" version "2026.2.1"
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}

repositories {
    mavenCentral()
}

dependencies {
    // Core WPILib utilities + NTCore
    implementation wpi.java.deps.wpilib()
    implementation wpi.java.vendor.java()

    runtimeOnly wpi.java.deps.wpilibJniRelease(wpi.platforms.desktop)
    runtimeOnly wpi.java.vendor.jniRelease(wpi.platforms.desktop)

    testImplementation 'org.junit.jupiter:junit-jupiter:5.10.1'
}

test {
    useJUnitPlatform()
}

jar {
    archiveBaseName = "pi-logger"
    duplicatesStrategy = DuplicatesStrategy.INCLUDE

    manifest {
        attributes(
            "Main-Class": "pi.logger.Main"
        )
    }

    from {
        configurations.runtimeClasspath.collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }
}
